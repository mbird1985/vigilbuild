{% extends "base.html" %}
{% block content %}
<div class="space-y-4">
  <div class="flex items-center justify-between">
    <h1 class="text-2xl font-bold">Maintenance Job #{{ job.id }}</h1>
    <a href="{{ url_for('equipment.maintenance_landing') }}" class="btn-integration btn-blue">Back</a>
  </div>
  <div class="bg-white rounded shadow p-4 grid md:grid-cols-2 gap-4">
    <div>
      <div class="text-sm text-gray-600">Equipment</div>
      <div class="font-medium">#{{ equipment.id }} â€” {{ equipment.unique_id }}</div>
    </div>
    <div>
      <div class="text-sm text-gray-600">Status</div>
      <div class="font-medium">{{ job.status }}</div>
    </div>
    <div>
      <div class="text-sm text-gray-600">Priority</div>
      <div class="font-medium">{{ job.priority }}</div>
    </div>
    <div>
      <div class="text-sm text-gray-600">Due</div>
      <div class="font-medium">{{ job.due_date or '-' }}</div>
    </div>
    <div class="md:col-span-2">
      <div class="text-sm text-gray-600">Notes</div>
      <div class="font-medium whitespace-pre-wrap">{{ job.notes or '-' }}</div>
    </div>
  </div>
  <div class="bg-white rounded shadow p-4">
    <div class="font-semibold mb-2">Time Logs</div>
    <form method="post" action="{{ url_for('equipment.maintenance_job_log_time', job_id=job.id) }}" class="flex flex-wrap gap-2 mb-3">
      <input type="date" name="work_date" class="border rounded p-2">
      <input type="number" step="0.25" min="0" name="hours" placeholder="Hours" class="border rounded p-2">
      <input type="text" name="notes" placeholder="Notes" class="border rounded p-2 flex-1">
      <button class="btn-integration btn-teal">Log Time</button>
    </form>
    <table class="w-full text-left">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-2 py-1">Date</th>
          <th class="px-2 py-1">User</th>
          <th class="px-2 py-1">Hours</th>
          <th class="px-2 py-1">Notes</th>
        </tr>
      </thead>
      <tbody>
        {% for t in time_logs %}
        <tr class="border-t">
          <td class="px-2 py-1">{{ t.work_date }}</td>
          <td class="px-2 py-1">{{ t.user_id }}</td>
          <td class="px-2 py-1">{{ t.hours }}</td>
          <td class="px-2 py-1">{{ t.notes }}</td>
        </tr>
        {% else %}
        <tr><td class="px-2 py-2 text-gray-600" colspan="4">No time logs yet.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}


