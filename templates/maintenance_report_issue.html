{% extends "base.html" %}
{% block content %}
<div class="p-4 space-y-4 max-w-3xl mx-auto">
  <h2 class="text-xl font-semibold text-teal-800">Report Equipment Breakdown</h2>
  <form method="POST" enctype="multipart/form-data" class="grid grid-cols-1 gap-3">
    <div>
      <label class="block text-sm text-gray-700 mb-1">Equipment</label>
      <select id="equipment_id" name="equipment_id" class="w-full border p-2 rounded" required>
        <option value="">Select equipment</option>
        {% for e in equipment %}
        <option value="{{ e.id }}" data-brand="{{ e.brand }}" data-model="{{ e.model }}">{{ e.unique_id }} â€” {{ e.brand }} {{ e.model }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="grid grid-cols-2 gap-3">
      <div>
        <label class="block text-sm text-gray-700 mb-1">Brand</label>
        <input id="brand" name="brand" type="text" class="w-full border p-2 rounded" placeholder="Brand">
      </div>
      <div>
        <label class="block text-sm text-gray-700 mb-1">Model</label>
        <input id="model" name="model" type="text" class="w-full border p-2 rounded" placeholder="Model">
      </div>
    </div>
    <div>
      <label class="block text-sm text-gray-700 mb-1">Priority</label>
      <select name="priority" class="w-full border p-2 rounded">
        <option value="high">High</option>
        <option value="critical">Critical</option>
        <option value="normal">Normal</option>
      </select>
    </div>
    <div>
      <label class="block text-sm text-gray-700 mb-1">Describe the issue</label>
      <textarea name="notes" rows="4" class="w-full border p-2 rounded" placeholder="What happened? Include any codes or sounds."></textarea>
    </div>
    <div>
      <label class="block text-sm text-gray-700 mb-1">Photos</label>
      <input name="photos" type="file" accept="image/*" multiple class="w-full border p-2 rounded">
    </div>
    <div>
      <button type="submit" class="btn-integration btn-teal w-full">Submit Breakdown</button>
    </div>
  </form>
</div>
<script>
  // Mobile-friendly auto-fill on equipment select
  document.getElementById('equipment_id').addEventListener('change', function() {
    const opt = this.selectedOptions[0];
    if (!opt) return;
    document.getElementById('brand').value = opt.dataset.brand || '';
    document.getElementById('model').value = opt.dataset.model || '';
  });
</script>
{% endblock %}
















