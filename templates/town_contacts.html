{% extends "base.html" %}
{% block content %}
<div class="space-y-6">
  <div class="flex items-center justify-between">
    <h2 class="text-2xl font-semibold text-teal-800">Town Contacts</h2>
    <a href="{{ url_for('towns.towns') }}" class="text-teal-600 hover:text-teal-800">Back to Towns</a>
  </div>

  <div class="bg-white rounded-lg shadow-md p-4">
    <form method="POST" action="{{ url_for('towns.add_town_contact', town_id=town_id) }}" class="grid grid-cols-1 md:grid-cols-6 gap-2">
      <input type="text" name="role" placeholder="Role (e.g., digging)" class="px-2 py-1 border rounded md:col-span-2" required>
      <input type="text" name="name" placeholder="Contact Name" class="px-2 py-1 border rounded md:col-span-2" required>
      <input type="email" name="email" placeholder="Email" class="px-2 py-1 border rounded">
      <input type="text" name="phone" placeholder="Phone" class="px-2 py-1 border rounded">
      <input type="text" name="address" placeholder="Mailing Address" class="px-2 py-1 border rounded md:col-span-5">
      <div class="md:col-span-6">
        <button type="submit" class="btn-integration btn-teal">Add Contact</button>
      </div>
    </form>
  </div>

  <div class="bg-white rounded-lg shadow-md overflow-hidden">
    <div class="px-4 py-2 border-b bg-gray-50 text-gray-700 font-medium">Contacts</div>
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase">Role</th>
            <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase">Name</th>
            <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase">Email</th>
            <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase">Phone</th>
            <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase">Address</th>
            <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          {% for c in contacts %}
          <tr class="hover:bg-gray-50 text-sm">
            <td class="px-3 py-2">{{ c.role }}</td>
            <td class="px-3 py-2">{{ c.name }}</td>
            <td class="px-3 py-2">{% if c.email %}<a class="text-teal-700 hover:underline" href="mailto:{{ c.email }}">{{ c.email }}</a>{% else %}-{% endif %}</td>
            <td class="px-3 py-2">{{ c.phone or '-' }}</td>
            <td class="px-3 py-2">{{ c.address or '-' }}</td>
            <td class="px-3 py-2">
              <form method="POST" action="{{ url_for('towns.delete_town_contact', town_id=town_id, contact_id=c.id) }}">
                <button type="submit" class="btn-integration btn-red" style="padding: 2px 6px; font-size: 11px;">Delete</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}


